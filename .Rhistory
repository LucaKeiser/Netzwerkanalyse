net_SR <- net_SR %>%
activate(nodes) %>%
# Berechnung und standardisierung([0,1]) der Betweenness
mutate(degree = centrality_degree(),
betweenness = centrality_betweenness(),
closeness = centrality_closeness())
# Chunk 5
# Ohne jegliche Attribute
set.seed(1234)
net_SR %>%
activate(nodes) %>%
filter(betweenness >= 5) %>%
ggraph(layout = "fr") +
geom_node_point() +
geom_edge_link() +
labs(title = "Ständerätliches Netzwerk - Fruchtermannreingold",
subtitle = "Ohne jegliche Attribute",
caption = "Knoten mit einem Betweenness-Score < 5 wurden herausgefiltert") +
theme_graph()
set.seed(1234)
net_SR %>%
activate(nodes) %>%
filter(betweenness > 5) %>%
ggraph(layout = "circle") +
geom_node_point() +
geom_edge_link() +
labs(title = "Ständerätliches Netzwerk - 'Circle'",
subtitle = "Ohne jegliche Attribute",
caption = "Knoten mit einem Betweenness-Score < 5 wurden herausgefiltert") +
theme_graph()
# Chunk 6
# Mit Knotenattributen
set.seed(1245)
net_SR %>%
activate(nodes) %>%
filter(betweenness >= 5) %>%
ggraph(layout = "fr") +
geom_node_point(aes(color = parlamentarier_partei,
size = betweenness)) +
geom_node_text(aes(label = name),
repel = TRUE) +
scale_size(range = c(5, 15)) +
geom_edge_link() +
scale_color_manual(values = c("FDP" = "cornflowerblue",
"Grüne" = "chartreuse2",
"M" = "darkorange",
"SP" = "brown1",
"SVP" = "chartreuse4")) +
guides(size = FALSE) +
theme_graph() +
labs(title = "Ständerätliches Netzwerk - Fruchtermannreingold",
subtitle = "Knotenattribute: Namen, Parteizugehörigkeit und Betweenness-Score\n",
color = "Partei",
caption = "Knoten mit einem Betweenness-Score < 5 wurden herausgefiltert")
# Chunk 7
# Hinzufügen der Kantenattribute
set.seed(1245)
net_SR %>%
activate(nodes) %>%
filter(betweenness >= 5) %>%
ggraph(layout = "fr") +
geom_node_point(aes(color = parlamentarier_partei,
size = betweenness)) +
geom_node_text(aes(label = name),
repel = TRUE) +
geom_edge_link(aes(width = weight_std,
alpha = weight_std),
show.legend = FALSE) +
scale_size(range = c(5, 15)) +
scale_edge_width(range = c(0.1, 1)) +
scale_color_manual(values = c("FDP" = "cornflowerblue",
"Grüne" = "chartreuse2",
"M" = "darkorange",
"SP" = "brown1",
"SVP" = "chartreuse4")) +
guides(size = FALSE) +
theme_graph() +
labs(title = "Ständerätliches Netzwerk - Fruchtermannreingold",
subtitle = "Knotenattribute: Namen, Parteizugehörigkeit und Betweenness-Score\nKantenattribute: Betweenness-Score",
color = "Partei",
caption = "Knoten mit einem Betweenness-Score < 5 wurden herausgefiltert")
# Hinzufügen der Kantenattribute
set.seed(1245)
net_SR %>%
activate(nodes) %>%
filter(betweenness >= 5) %>%
ggraph(layout = "fr") +
geom_node_point(aes(color = parlamentarier_partei,
size = betweenness)) +
geom_node_text(aes(label = name),
repel = TRUE) +
geom_edge_link(aes(width = weight_std,
alpha = weight_std),
show.legend = FALSE) +
scale_size(range = c(5, 15)) +
scale_edge_width(range = c(0.1, 1)) +
scale_color_manual(values = c("FDP" = "cornflowerblue",
"Grüne" = "chartreuse2",
"M" = "darkorange",
"SP" = "brown1",
"SVP" = "chartreuse4")) +
guides(size = FALSE) +
theme_graph() +
labs(title = "Ständerätliches Netzwerk - Fruchtermannreingold",
subtitle = "Knotenattribute: Namen, Parteizugehörigkeit und Betweenness-Score\nKantenattribute: Betweenness-Score",
color = "Partei",
caption = "Knoten mit einem Betweenness-Score < 5 wurden herausgefiltert")
# Mit Knotenattributen
set.seed(1245)
net_SR %>%
activate(nodes) %>%
filter(betweenness >= 5) %>%
ggraph(layout = "fr") +
geom_node_point(aes(color = parlamentarier_partei,
size = betweenness)) +
geom_node_text(aes(label = name),
repel = TRUE) +
scale_size(range = c(5, 15)) +
geom_edge_link() +
scale_color_manual(values = c("FDP" = "cornflowerblue",
"Grüne" = "chartreuse2",
"M" = "darkorange",
"SP" = "brown1",
"SVP" = "chartreuse4")) +
guides(size = FALSE) +
theme_graph() +
labs(title = "Ständerätliches Netzwerk - Fruchtermannreingold",
subtitle = "Knotenattribute: Namen, Parteizugehörigkeit und Betweenness-Score\n",
color = "Partei",
caption = "Knoten mit einem Betweenness-Score < 5 wurden herausgefiltert")
# Ohne jegliche Attribute
set.seed(1234)
net_SR %>%
activate(nodes) %>%
filter(betweenness >= 5) %>%
ggraph(layout = "fr") +
geom_node_point() +
geom_edge_link() +
labs(title = "Ständerätliches Netzwerk - Fruchtermannreingold",
subtitle = "Ohne jegliche Attribute",
caption = "Knoten mit einem Betweenness-Score < 5 wurden herausgefiltert") +
theme_graph()
set.seed(1234)
net_SR %>%
activate(nodes) %>%
filter(betweenness > 5) %>%
ggraph(layout = "circle") +
geom_node_point() +
geom_edge_link() +
labs(title = "Ständerätliches Netzwerk - 'Circle'",
subtitle = "Ohne jegliche Attribute",
caption = "Knoten mit einem Betweenness-Score < 5 wurden herausgefiltert") +
theme_graph()
# Chunk 1: data import
library(tidyverse)
library(tidygraph)
library(igraph)
library(ggraph)
library(janitor)
library(data.table)
# Einlesen des Datensatzes
doc <- read_delim("Data/Lobbywatch/cartesian_minimal_parlamentarier_interessenbindung.csv",
delim = "\t")
# Wir interessieren uns nur die Ständerät:innen
doc_SR <- doc %>%
filter(parlamentarier_rat == "SR")
parlamentarier <- doc_SR %>%
select(parlamentarier_id,
parlamentarier_name,
parlamentarier_partei) %>%
group_by(parlamentarier_name) %>%
distinct(parlamentarier_id,
.keep_all = TRUE) %>%
arrange(parlamentarier_id) %>%
rename("id" = parlamentarier_id) %>%
rename("name" = parlamentarier_name)
# Chunk 2: data import
# Erstellen der Gruppen
groupings <- doc_SR %>%
select(parlamentarier_id,
organisation_id) %>%
mutate(parlamentarier_id = str_c(parlamentarier_id, "",
sep = "_")) %>% # Wird später gebraucht, um die einzelnen IDs wieder voneinander trennen zu können.
group_by(organisation_id, parlamentarier_id) %>%
distinct() %>%
summarise(sum = n())
setDT(groupings)
# N = Anahl geteilter Organisationsmitgliedschaften. In diesem Schritt erstellen wir das Kantenattribut.
ties_SR <- groupings[groupings, on = "organisation_id", allow.cartesian = TRUE][parlamentarier_id<i.parlamentarier_id, .N, .(pair = paste0(parlamentarier_id, i.parlamentarier_id))]
# Chunk 3: data import
# Erstellen eines tidy-Datensatzes
ties_SR <- ties_SR %>%
separate(pair,
into = c("from", "to"),
sep = "_") %>%
rename("weight" = N) %>%
arrange(desc(weight)) %>%
filter(weight >= 5) # Es werden nur Verbindungen zwischen Parlamentarier:innen verwendet, die in >= 5 gleichen Organisationen einsitzen.
# Knoten
parlamentarier
# Kanten
ties_SR
# Der Variationsbereich der Gewichtung (Kantenattribut) wird auf [0, 1] festgelegt.
ties_SR$weight_std <- (ties_SR$weight - min(ties_SR$weight)) /  (max(ties_SR$weight) - min(ties_SR$weight))
# Damit keine Null-Werte entstehend wird 0.05 zu diesen addiert
ties_SR$weight[ties_SR$weight == 0] <- ties_SR$weight[ties_SR$weight == 0] + 0.05
# erstellen des Netzwerkobjekts (tidygraph)
net_SR <- as_tbl_graph(ties_SR,
directed = FALSE)
# Generelle Netzwerkangaben
# Component
count_components(net_SR)
# Dichte
edge_density(net_SR,
loops = FALSE)
# Diameter
diameter(net_SR,
directed = FALSE)
# Chunk 4
# hinzufügen der Knotenattribute
net_SR <- net_SR %>%
activate(nodes) %>%
# Datentyp muss angepasst werden.
mutate(name = as.numeric(name)) %>%
left_join(parlamentarier,
by = c("name" = "id")) %>%
rename("id" = "name",
"name" = "name.y")
# Hinzufügen Zentralitätsmasse
net_SR <- net_SR %>%
activate(nodes) %>%
# Berechnung und standardisierung([0,1]) der Betweenness
mutate(degree = centrality_degree(),
betweenness = centrality_betweenness(),
closeness = centrality_closeness())
# Chunk 5
# Ohne jegliche Attribute
set.seed(1234)
net_SR %>%
activate(nodes) %>%
filter(betweenness >= 5) %>%
ggraph(layout = "fr") +
geom_node_point() +
geom_edge_link() +
labs(title = "Ständerätliches Netzwerk - Fruchtermannreingold",
subtitle = "Ohne jegliche Attribute",
caption = "Knoten mit einem Betweenness-Score < 5 wurden herausgefiltert") +
theme_graph()
set.seed(1234)
net_SR %>%
activate(nodes) %>%
filter(betweenness > 5) %>%
ggraph(layout = "circle") +
geom_node_point() +
geom_edge_link() +
labs(title = "Ständerätliches Netzwerk - 'Circle'",
subtitle = "Ohne jegliche Attribute",
caption = "Knoten mit einem Betweenness-Score < 5 wurden herausgefiltert") +
theme_graph()
# Chunk 6
# Mit Knotenattributen
set.seed(1245)
net_SR %>%
activate(nodes) %>%
filter(betweenness >= 5) %>%
ggraph(layout = "fr") +
geom_node_point(aes(color = parlamentarier_partei,
size = betweenness)) +
geom_node_text(aes(label = name),
repel = TRUE) +
scale_size(range = c(5, 15)) +
geom_edge_link() +
scale_color_manual(values = c("FDP" = "cornflowerblue",
"Grüne" = "chartreuse2",
"M" = "darkorange",
"SP" = "brown1",
"SVP" = "chartreuse4")) +
guides(size = FALSE) +
theme_graph() +
labs(title = "Ständerätliches Netzwerk - Fruchtermannreingold",
subtitle = "Knotenattribute: Namen, Parteizugehörigkeit und Betweenness-Score\n",
color = "Partei",
caption = "Knoten mit einem Betweenness-Score < 5 wurden herausgefiltert")
# Chunk 7
# Hinzufügen der Kantenattribute
set.seed(1245)
net_SR %>%
activate(nodes) %>%
filter(betweenness >= 5) %>%
ggraph(layout = "fr") +
geom_node_point(aes(color = parlamentarier_partei,
size = betweenness)) +
geom_node_text(aes(label = name),
repel = TRUE) +
geom_edge_link(aes(width = weight_std,
alpha = weight_std),
show.legend = FALSE) +
scale_size(range = c(5, 15)) +
scale_edge_width(range = c(0.1, 1)) +
scale_color_manual(values = c("FDP" = "cornflowerblue",
"Grüne" = "chartreuse2",
"M" = "darkorange",
"SP" = "brown1",
"SVP" = "chartreuse4")) +
guides(size = FALSE) +
theme_graph() +
labs(title = "Ständerätliches Netzwerk - Fruchtermannreingold",
subtitle = "Knotenattribute: Namen, Parteizugehörigkeit und Betweenness-Score\nKantenattribute: Betweenness-Score",
color = "Partei",
caption = "Knoten mit einem Betweenness-Score < 5 wurden herausgefiltert")
library(tidyverse)
library(tidygraph)
library(igraph)
library(ggraph)
library(janitor)
library(data.table)
# Einlesen des Datensatzes
doc <- read_delim("Data/Lobbywatch/cartesian_minimal_parlamentarier_interessenbindung.csv",
delim = "\t")
# Wir interessieren uns nur die Ständerät:innen
doc_SR <- doc %>%
filter(parlamentarier_rat == "SR")
parlamentarier <- doc_SR %>%
select(parlamentarier_id,
parlamentarier_name,
parlamentarier_partei) %>%
group_by(parlamentarier_name) %>%
distinct(parlamentarier_id,
.keep_all = TRUE) %>%
arrange(parlamentarier_id) %>%
rename("id" = parlamentarier_id) %>%
rename("name" = parlamentarier_name)
# Erstellen der Gruppen
groupings <- doc_SR %>%
select(parlamentarier_id,
organisation_id) %>%
mutate(parlamentarier_id = str_c(parlamentarier_id, "",
sep = "_")) %>% # Wird später gebraucht, um die einzelnen IDs wieder voneinander trennen zu können.
group_by(organisation_id, parlamentarier_id) %>%
distinct() %>%
summarise(sum = n())
setDT(groupings)
# N = Anahl geteilter Organisationsmitgliedschaften. In diesem Schritt erstellen wir das Kantenattribut.
ties_SR <- groupings[groupings, on = "organisation_id", allow.cartesian = TRUE][parlamentarier_id<i.parlamentarier_id, .N, .(pair = paste0(parlamentarier_id, i.parlamentarier_id))]
# Erstellen eines tidy-Datensatzes
ties_SR <- ties_SR %>%
separate(pair,
into = c("from", "to"),
sep = "_") %>%
rename("weight" = N) %>%
arrange(desc(weight)) %>%
filter(weight >= 5) # Es werden nur Verbindungen zwischen Parlamentarier:innen verwendet, die in >= 5 gleichen Organisationen einsitzen.
# Knoten
parlamentarier
# Kanten
ties_SR
# Der Variationsbereich der Gewichtung (Kantenattribut) wird auf [0, 1] festgelegt.
ties_SR$weight_std <- (ties_SR$weight - min(ties_SR$weight)) /  (max(ties_SR$weight) - min(ties_SR$weight))
# Damit keine Null-Werte entstehend wird 0.05 zu diesen addiert
ties_SR$weight[ties_SR$weight == 0] <- ties_SR$weight[ties_SR$weight == 0] + 0.05
# erstellen des Netzwerkobjekts (tidygraph)
net_SR <- as_tbl_graph(ties_SR,
directed = FALSE)
# Generelle Netzwerkangaben
# Component
count_components(net_SR)
# Dichte
edge_density(net_SR,
loops = FALSE)
# Diameter
diameter(net_SR,
directed = FALSE)
# Erstellen eines tidy-Datensatzes
ties_SR <- ties_SR %>%
separate(pair,
into = c("from", "to"),
sep = "_") %>%
rename("weight" = N) %>%
arrange(desc(weight)) %>%
filter(weight >= 5) # Es werden nur Verbindungen zwischen Parlamentarier:innen verwendet, die in >= 5 gleichen Organisationen einsitzen.
# Knoten
parlamentarier
# Kanten
ties_SR
# Der Variationsbereich der Gewichtung (Kantenattribut) wird auf [0, 1] festgelegt.
ties_SR$weight_std <- (ties_SR$weight - min(ties_SR$weight)) /  (max(ties_SR$weight) - min(ties_SR$weight))
# Damit keine Null-Werte entstehend wird 0.05 zu diesen addiert
ties_SR$weight[ties_SR$weight == 0] <- ties_SR$weight[ties_SR$weight == 0] + 0.05
# erstellen des Netzwerkobjekts (tidygraph)
net_SR <- as_tbl_graph(ties_SR,
directed = FALSE)
# Generelle Netzwerkangaben
# Component
count_components(net_SR)
# Dichte
edge_density(net_SR,
loops = FALSE)
# Diameter
diameter(net_SR,
directed = FALSE)
# hinzufügen der Knotenattribute
net_SR <- net_SR %>%
activate(nodes) %>%
# Datentyp muss angepasst werden.
mutate(name = as.numeric(name)) %>%
left_join(parlamentarier,
by = c("name" = "id")) %>%
rename("id" = "name",
"name" = "name.y")
# Hinzufügen Zentralitätsmasse
net_SR <- net_SR %>%
activate(nodes) %>%
# Berechnung und standardisierung([0,1]) der Betweenness
mutate(degree = centrality_degree(),
betweenness = centrality_betweenness(),
closeness = centrality_closeness())
# Ohne jegliche Attribute
set.seed(1234)
net_SR %>%
activate(nodes) %>%
filter(betweenness >= 5) %>%
ggraph(layout = "fr") +
geom_node_point() +
geom_edge_link() +
labs(title = "Ständerätliches Netzwerk - Fruchtermannreingold",
subtitle = "Ohne jegliche Attribute",
caption = "Knoten mit einem Betweenness-Score < 5 wurden herausgefiltert") +
theme_graph()
set.seed(1234)
net_SR %>%
activate(nodes) %>%
filter(betweenness > 5) %>%
ggraph(layout = "circle") +
geom_node_point() +
geom_edge_link() +
labs(title = "Ständerätliches Netzwerk - 'Circle'",
subtitle = "Ohne jegliche Attribute",
caption = "Knoten mit einem Betweenness-Score < 5 wurden herausgefiltert") +
theme_graph()
# Ohne jegliche Attribute
set.seed(1234)
net_SR %>%
activate(nodes) %>%
filter(betweenness >= 5) %>%
ggraph(layout = "fr") +
geom_node_point() +
geom_edge_link() +
labs(title = "Ständerätliches Netzwerk - Fruchtermannreingold",
subtitle = "Ohne jegliche Attribute",
caption = "Knoten mit einem Betweenness-Score < 5 wurden herausgefiltert") +
theme_graph()
set.seed(1234)
net_SR %>%
activate(nodes) %>%
filter(betweenness > 5) %>%
ggraph(layout = "circle") +
geom_node_point() +
geom_edge_link() +
labs(title = "Ständerätliches Netzwerk - 'Circle'",
subtitle = "Ohne jegliche Attribute",
caption = "Knoten mit einem Betweenness-Score < 5 wurden herausgefiltert") +
theme_graph()
# Mit Knotenattributen
set.seed(1245)
net_SR %>%
activate(nodes) %>%
filter(betweenness >= 5) %>%
ggraph(layout = "fr") +
geom_node_point(aes(color = parlamentarier_partei,
size = betweenness)) +
geom_node_text(aes(label = name),
repel = TRUE) +
scale_size(range = c(5, 15)) +
geom_edge_link() +
scale_color_manual(values = c("FDP" = "cornflowerblue",
"Grüne" = "chartreuse2",
"M" = "darkorange",
"SP" = "brown1",
"SVP" = "chartreuse4")) +
guides(size = FALSE) +
theme_graph() +
labs(title = "Ständerätliches Netzwerk - Fruchtermannreingold",
subtitle = "Knotenattribute: Namen, Parteizugehörigkeit und Betweenness-Score\n",
color = "Partei",
caption = "Knoten mit einem Betweenness-Score < 5 wurden herausgefiltert")
# Hinzufügen der Kantenattribute
set.seed(1245)
net_SR %>%
activate(nodes) %>%
filter(betweenness >= 5) %>%
ggraph(layout = "fr") +
geom_node_point(aes(color = parlamentarier_partei,
size = betweenness)) +
geom_node_text(aes(label = name),
repel = TRUE) +
geom_edge_link(aes(width = weight_std,
alpha = weight_std),
show.legend = FALSE) +
scale_size(range = c(5, 15)) +
scale_edge_width(range = c(0.1, 1)) +
scale_color_manual(values = c("FDP" = "cornflowerblue",
"Grüne" = "chartreuse2",
"M" = "darkorange",
"SP" = "brown1",
"SVP" = "chartreuse4")) +
guides(size = FALSE) +
theme_graph() +
labs(title = "Ständerätliches Netzwerk - Fruchtermannreingold",
subtitle = "Knotenattribute: Namen, Parteizugehörigkeit und Betweenness-Score\nKantenattribute: Betweenness-Score",
color = "Partei",
caption = "Knoten mit einem Betweenness-Score < 5 wurden herausgefiltert")
getwd()
